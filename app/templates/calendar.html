<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/themes/base/jquery-ui.css">
    <style>
        .week-picker {
            width: 10px; /* Adjust the width as needed */
            font-size: 12px; /* Adjust the font size as needed */
        }
       
        .ui-datepicker {
            width: 14em !important;
        }
       
    </style>
    <script type="text/javascript">
        $(function() {
            var startDate;
            var endDate;

            var selectCurrentWeek = function() {
                window.setTimeout(function () {
                    $('.week-picker').find('.ui-datepicker-current-day a').addClass('ui-state-active');
                }, 1);
            };

            // Function to set default values to the current week
            var setDefaultWeek = function() {
                var today = new Date();
                startDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() - today.getDay());
                endDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() - today.getDay() + 6);
            };

            // Call the function to set default values
            setDefaultWeek();

            // Event listener for page load
            $(document).ready(function() {
                // Log start and end dates on page load
                console.log("Start Date on Page Load: ", startDate);
                console.log("End Date on Page Load: ", endDate);
            });

            $('.week-picker').datepicker({
                showOtherMonths: true,
                selectOtherMonths: true,
                defaultDate: startDate, // Set default date to startDate
                onSelect: function(dateText, inst) {
                    var date = $(this).datepicker('getDate');
                    startDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - (date.getDay() + 1) % 7 + 0);
                    endDate = new Date(date.getFullYear(), date.getMonth(), date.getDate() - (date.getDay() + 1) % 7 + 6);
                    var dateFormat = inst.settings.dateFormat || $.datepicker._defaults.dateFormat;

                    $('#startDate').text($.datepicker.formatDate(dateFormat, startDate, inst.settings));
                    $('#endDate').text($.datepicker.formatDate(dateFormat, endDate, inst.settings));
                    console.log('hello')

                    selectCurrentWeek();
                },
                beforeShowDay: function(date) {
                    var cssClass = '';
                    if(date >= startDate && date <= endDate)
                        cssClass = 'ui-datepicker-current-day';
                    return [true, cssClass];
                },
                onChangeMonthYear: function(year, month, inst) {
                    selectCurrentWeek();
                }
            });

            $('.week-picker .ui-datepicker-calendar tr').live('mousemove', function() { $(this).find('td a').addClass('ui-state-hover'); });
            $('.week-picker .ui-datepicker-calendar tr').live('mouseleave', function() { $(this).find('td a').removeClass('ui-state-hover'); });
            
        });
    </script>
</head>
<body>
    <div class="week-picker"></div>
    <br /><br />
    <label>Week :</label> <span id="startDate"></span> - <span id="endDate"></span>
</body>
</html>


    {% comment %} if (date && selectedDate && date instanceof Date && date instanceof Date) {
                  // Compare dates for equality
                  if (selectedDate.getTime() === date.getTime()) {
                      console.log("The dates are equal.");
                      cssClass+=''



                  } else {
                      console.log("The dates are not equal.");
                  }
              } {% endcomment %}