<!DOCTYPE html>
<html>
<head>
    <title>View Data</title>
    <!-- Include DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.css" />
    
</head>
<body>
    <div id="section-tabs">

        <div id="general-hse-tab">
            <h2>General HSE</h2>
            <table id="general-hse-table" class="display">
                <thead>
                    <tr>
                        <th>Total man days worked</th>
                        <th>Total safe man hours worked</th>
                        <th>Number of person inducted in site</th>
                        <th>Total number of toolbox attendees</th>
                        <th>Total man days worked File</th>
                        <!-- Add more headers here as needed -->
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

        <div id="hse-training-tab">
            <h2>HSE Training</h2>
            <table id="hse-training-table" class="display">
                <thead>
                    <tr>
                        <th>HSE Trainings (no. of attendees from Amplus)</th>
                        <th>Duration of training session</th>
                        <th>HSE Trainings (no. of attendees from Contractor)</th>
                        <th>Duration of training session</th>
                        <th>No of attendees from Amplus File</th>
                        <th>No of attendees from Contractor File</th>
                        <!-- Add more headers here as needed -->
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

        <div id="hse-observation-tab">
            <h2>HSE Observation</h2>
            <table id="hse-observation-table" class="display">
                <thead>
                    <tr>
                        <th>Number of daily HSE observations</th>
                        <th>Number of STOP Work notice issued</th>
                        <th>Number of Violation Memo issued</th>
                        <th>Number of complaints from customers</th>
                        <th>Daily HSE observations File</th>
                        <!-- Add more headers here as needed -->
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

        <div id="management-visits-tab">
            <h2>Management Visits</h2>
            <table id="management-visits-table" class="display">
                <thead>
                    <tr>
                        <th>Number of Management HSE Visits</th>
                        <th>Total Findings</th>
                        <th>Number of compilance done</th>
                        <th>Number of observation pending</th>
                        <th>Management Visits File</th>
                        <th>Total Findings File</th>
                        <th>Compilance File</th>
                        <!-- Add more headers here as needed -->
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        
        <div id="incident-tab">
            <h2>Incidents</h2>
            <table id="incident-table" class="display">
                <thead>
                    <tr>
                        <th>Number of Incidents</th>
                        <th>Number of occupational illness</th>
                        <th>Number of environmental illness</th>
                        <!-- Add more headers here as needed -->
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.js"></script>

    <script>
        // Fetch data from your API for the 'General HSE' table
        $.ajax({
            url: '/api/child-models/?week_number=42&year=2023&plant_code=10000', // Replace with your API endpoint
            method: 'GET',
            dataType: 'json',
            success: function(data) {
                console.log(data);

                // Populate the 'General HSE' DataTable with the fetched data
                $('#general-hse-table').DataTable({
                    data: data['General HSE'],
                    columns: [
                        { data: 'total_man_days_worked' },
                        { data: 'total_safe_man_hours' },
                        { data: 'no_of_person_inducted_site' },
                        { data: 'no_of_toolbox_attendees' },
                        { data: 'today_day_worked_file' },
                        // Add more columns as needed
                    ],
                    dom: 't'
                });
                $('#hse-training-table').DataTable({
                    data: data['HSE Training'],
                    columns: [
                        { data: 'hse_training_attendees' },
                        { data: 'duration_of_trainee' },
                        { data: 'hse_training_contractor' },
                        { data: 'duration_of_contractor' },
                        { data: 'no_of_attendees_amplus' },
                        { data: 'no_of_attendees_contractor' },
                    ],
                    dom: 't'

                });

                $('#hse-observation-table').DataTable({
                    data: data['HSE Observation'],
                    columns: [
                        { data: 'daily_hse_observation' },
                        { data: 'stop_work_notice' },
                        { data: 'violation_memo_issued' },
                        { data: 'complaint_from_customer' },
                        { data: 'hse_observation' },
                    ],
                    dom: 't'

                });

                $('#management-visits-table').DataTable({
                    data: data['Management Visits'],
                    columns: [
                        { data: 'no_of_management_visits' },
                        { data: 'total_findings' },
                        { data: 'no_of_compilance_done' },
                        { data: 'observation_pending' },
                        { data: 'observation_pending' },
                        { data: 'observation_pending' },
                    ],
                    dom: 't'

                });

                $('#incident-table').DataTable({
                    data: data['Incidents'],
                    columns: [
                        { data: 'no_of_incidents' },
                        { data: 'no_of_occupation_illness' },
                        { data: 'no_of_environment_illness' },
                    ],
                    dom: 't'

                });
                
            },
            error: function(err) {
                console.error('Error fetching data:', err);
            }
        });

       
    </script>
</body>
</html>

